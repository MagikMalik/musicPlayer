/* Global Styles & Variables */
:root {
    --font-primary: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Modern, clean font */
    --font-secondary: 'Orbitron', sans-serif; /* Futuristic font for headers/accents - needs Google Font import */

    /* Default Light Theme Variables */
    --bg-color-light: #eef2f7; /* Light grey-blue */
    --surface-color-light: #ffffff;
    --text-color-light: #1a1c20;
    --accent-color-light: #007bff; /* Vibrant blue */
    --accent-hover-light: #0056b3;
    --border-color-light: #d1d9e6;
    --shadow-color-light: rgba(0, 123, 255, 0.2);

    /* Default Dark Theme Variables */
    --bg-color-dark: #121212; /* Very dark grey, almost black */
    --surface-color-dark: #1e1e1e; /* Slightly lighter dark for surfaces */
    --text-color-dark: #e0e0e0; /* Light grey for text */
    --accent-color-dark: #00f2ff; /* Neon cyan */
    --accent-hover-dark: #00b8d4;
    --border-color-dark: #2a2a2a;
    --shadow-color-dark: rgba(0, 242, 255, 0.3);

    /* Cyberpunk Theme Variables */
    --bg-color-cyber: #0d0221; /* Deep indigo/purple */
    --surface-color-cyber: #1a0a3d; /* Darker surface */
    --text-color-cyber: #f0f0f0;
    --accent-color-cyber: #ff00ff; /* Neon magenta */
    --accent-hover-cyber: #c000c0;
    --secondary-accent-cyber: #00f0ff; /* Neon cyan for contrast */
    --border-color-cyber: #3a1a78;
    --shadow-color-cyber: rgba(255, 0, 255, 0.4);

    --border-radius-sharp: 4px;
    --border-radius-soft: 8px;
    --transition-speed: 0.3s ease;
}

@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

body {
    font-family: var(--font-primary);
    margin: 0;
    padding: 0; /* Changed from 20px to 0 for full-width potential */
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

#main-container {
    max-width: 900px;
    margin: 20px auto; /* Add margin for spacing from viewport edges */
    padding: 25px;
    border-radius: var(--border-radius-soft);
    transition: background-color var(--transition-speed), box-shadow var(--transition-speed);
    position: relative; /* For potential future absolute positioned elements inside */
}

h2 {
    font-family: var(--font-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 20px;
}

/* Player Controls */
#player-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px; /* Space between buttons */
    margin-bottom: 25px;
    padding: 15px;
    border-radius: var(--border-radius-sharp);
    background-color: rgba(0,0,0,0.05); /* Subtle background */
}

#player-controls button {
    padding: 12px 20px;
    border: none;
    border-radius: var(--border-radius-sharp);
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

#player-controls button:active {
    transform: translateY(1px);
}

#volume-slider {
    width: 120px;
    height: 8px;
    -webkit-appearance: none;
    appearance: none;
    border-radius: var(--border-radius-sharp);
    cursor: pointer;
    transition: box-shadow var(--transition-speed);
}

#volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    transition: background-color var(--transition-speed);
}

#volume-slider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: none;
    transition: background-color var(--transition-speed);
}

/* Playlist/Library */
#playlist-library {
    margin-top: 30px;
    padding-top: 20px;
    border-top-width: 2px; /* Thicker border */
    border-top-style: solid;
}

#playlist {
    list-style: none;
    padding: 0;
    max-height: 300px; /* Limit height and allow scroll */
    overflow-y: auto;
}

#playlist li {
    padding: 12px 15px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    cursor: pointer;
    transition: background-color var(--transition-speed), color var(--transition-speed);
    font-size: 15px;
    display: flex;
    justify-content: space-between; /* For potential future additions like duration */
}

#playlist li.now-playing {
    font-weight: bold;
}

/* Visualizer */
#visualizer {
    width: 100%;
    height: 120px; /* Slightly taller */
    margin-top: 25px;
    border-radius: var(--border-radius-sharp);
    transition: background-color var(--transition-speed);
}

/* File Upload & Selections */
#file-upload-section,
#genre-selection,
#customization-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top-width: 2px;
    border-top-style: solid;
}

label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    font-size: 14px;
}

input[type="file"],
select,
input[type="color"] {
    margin-bottom: 15px;
    padding: 10px;
    border-width: 1px;
    border-style: solid;
    border-radius: var(--border-radius-sharp);
    width: calc(100% - 22px); /* Full width minus padding and border */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
    transition: border-color var(--transition-speed), background-color var(--transition-speed);
}

input[type="color"] {
    height: 40px; /* Consistent height with other inputs */
    padding: 5px; /* Adjust padding for color type */
}

/* --- Light Theme --- */
.light-theme {
    background-color: var(--bg-color-light);
    color: var(--text-color-light);
}
.light-theme #main-container {
    background-color: var(--surface-color-light);
    box-shadow: 0 5px 15px var(--shadow-color-light);
    border: 1px solid var(--border-color-light);
}
.light-theme h2 {
    color: var(--accent-color-light);
}
.light-theme #player-controls button {
    background-color: var(--accent-color-light);
    color: var(--surface-color-light);
}
.light-theme #player-controls button:hover {
    background-color: var(--accent-hover-light);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}
.light-theme #volume-slider {
    background: var(--border-color-light);
}
.light-theme #volume-slider::-webkit-slider-thumb {
    background: var(--accent-color-light);
}
.light-theme #volume-slider::-moz-range-thumb {
    background: var(--accent-color-light);
}
.light-theme #playlist-library,
.light-theme #file-upload-section,
.light-theme #genre-selection,
.light-theme #customization-section {
    border-top-color: var(--border-color-light);
}
.light-theme #playlist li {
    border-bottom-color: var(--border-color-light);
}
.light-theme #playlist li:hover {
    background-color: var(--bg-color-light);
}
.light-theme #playlist li.now-playing {
    color: var(--accent-color-light);
    background-color: #e6f2ff; /* Light blue accent for now playing */
}
.light-theme #visualizer {
    background-color: #d1d9e6; /* Lighter than dark theme's visualizer */
}
.light-theme input[type="file"],
.light-theme select,
.light-theme input[type="color"] {
    background-color: var(--surface-color-light);
    color: var(--text-color-light);
    border-color: var(--border-color-light);
}
.light-theme input[type="file"]::file-selector-button {
    background-color: var(--accent-color-light);
    color: var(--surface-color-light);
    border: none;
    padding: 10px 15px;
    border-radius: var(--border-radius-sharp);
    cursor: pointer;
    transition: background-color var(--transition-speed);
}
.light-theme input[type="file"]::file-selector-button:hover {
    background-color: var(--accent-hover-light);
}


/* --- Dark Theme --- */
.dark-theme {
    background-color: var(--bg-color-dark);
    color: var(--text-color-dark);
}
.dark-theme #main-container {
    background-color: var(--surface-color-dark);
    box-shadow: 0 5px 20px var(--shadow-color-dark);
    border: 1px solid var(--border-color-dark);
}
.dark-theme h2 {
    color: var(--accent-color-dark);
}
.dark-theme #player-controls button {
    background-color: var(--accent-color-dark);
    color: var(--bg-color-dark); /* Text color contrasts with button */
}
.dark-theme #player-controls button:hover {
    background-color: var(--accent-hover-dark);
    box-shadow: 0 2px 10px var(--shadow-color-dark);
}
.dark-theme #volume-slider {
    background: var(--border-color-dark);
}
.dark-theme #volume-slider::-webkit-slider-thumb {
    background: var(--accent-color-dark);
}
.dark-theme #volume-slider::-moz-range-thumb {
    background: var(--accent-color-dark);
}
.dark-theme #playlist-library,
.dark-theme #file-upload-section,
.dark-theme #genre-selection,
.dark-theme #customization-section {
    border-top-color: var(--border-color-dark);
}
.dark-theme #playlist li {
    border-bottom-color: var(--border-color-dark);
}
.dark-theme #playlist li:hover {
    background-color: #2a2a2a; /* Slightly lighter than surface for hover */
}
.dark-theme #playlist li.now-playing {
    color: var(--accent-color-dark);
    background-color: #253536; /* Dark cyan accent for now playing */
}
.dark-theme #visualizer {
    background-color: var(--bg-color-dark); /* Darker, to make bars pop */
}
.dark-theme input[type="file"],
.dark-theme select,
.dark-theme input[type="color"] {
    background-color: var(--bg-color-dark);
    color: var(--text-color-dark);
    border-color: var(--border-color-dark);
}
.dark-theme input[type="file"]::file-selector-button {
    background-color: var(--accent-color-dark);
    color: var(--bg-color-dark);
    border: none;
    padding: 10px 15px;
    border-radius: var(--border-radius-sharp);
    cursor: pointer;
    transition: background-color var(--transition-speed);
}
.dark-theme input[type="file"]::file-selector-button:hover {
    background-color: var(--accent-hover-dark);
}

/* --- Cyberpunk Theme --- */
.cyberpunk-theme {
    background-color: var(--bg-color-cyber);
    color: var(--text-color-cyber);
}
.cyberpunk-theme #main-container {
    background-color: var(--surface-color-cyber);
    box-shadow: 0 0 25px var(--shadow-color-cyber);
    border: 1px solid var(--border-color-cyber);
    border-image: linear-gradient(to right, var(--accent-color-cyber), var(--secondary-accent-cyber)) 1;
}
.cyberpunk-theme h2 {
    color: var(--accent-color-cyber);
    text-shadow: 0 0 5px var(--accent-color-cyber);
}
.cyberpunk-theme #player-controls {
    background-color: rgba(13, 2, 33, 0.5); /* Darker, semi-transparent */
}
.cyberpunk-theme #player-controls button {
    background: linear-gradient(145deg, var(--accent-color-cyber), var(--accent-hover-cyber));
    color: var(--text-color-cyber);
    text-shadow: 0 0 3px rgba(0,0,0,0.5);
    border: 1px solid var(--accent-color-cyber);
}
.cyberpunk-theme #player-controls button:hover {
    background: linear-gradient(145deg, var(--accent-hover-cyber), var(--accent-color-cyber));
    box-shadow: 0 0 15px var(--accent-color-cyber);
    transform: translateY(-1px); /* Slight lift effect */
}
.cyberpunk-theme #volume-slider {
    background: var(--border-color-cyber);
}
.cyberpunk-theme #volume-slider::-webkit-slider-thumb {
    background: var(--accent-color-cyber);
    box-shadow: 0 0 5px var(--accent-color-cyber);
}
.cyberpunk-theme #volume-slider::-moz-range-thumb {
    background: var(--accent-color-cyber);
    box-shadow: 0 0 5px var(--accent-color-cyber);
}
.cyberpunk-theme #playlist-library,
.cyberpunk-theme #file-upload-section,
.cyberpunk-theme #genre-selection,
.cyberpunk-theme #customization-section {
    border-top-color: var(--border-color-cyber);
}
.cyberpunk-theme #playlist li {
    border-bottom-color: var(--border-color-cyber);
}
.cyberpunk-theme #playlist li:hover {
    background-color: var(--accent-color-cyber_trans); /* Requires defining this, e.g. rgba(255,0,255,0.1) */
    color: var(--secondary-accent-cyber);
}
.cyberpunk-theme #playlist li.now-playing {
    color: var(--accent-color-cyber);
    background-color: rgba(255, 0, 255, 0.15); /* Magenta accent for now playing */
    border-left: 3px solid var(--accent-color-cyber);
}
.cyberpunk-theme #visualizer {
    background-color: #000; /* Pitch black for high contrast */
    border: 1px solid var(--secondary-accent-cyber);
    box-shadow: inset 0 0 10px var(--secondary-accent-cyber_trans); /* Requires defining this */
}
.cyberpunk-theme input[type="file"],
.cyberpunk-theme select,
.cyberpunk-theme input[type="color"] {
    background-color: var(--surface-color-cyber);
    color: var(--text-color-cyber);
    border: 1px solid var(--border-color-cyber);
}
.cyberpunk-theme input[type="file"]::file-selector-button {
    background: var(--accent-color-cyber);
    color: var(--text-color-cyber);
    border: none;
    padding: 10px 15px;
    border-radius: var(--border-radius-sharp);
    cursor: pointer;
    transition: background-color var(--transition-speed);
}
.cyberpunk-theme input[type="file"]::file-selector-button:hover {
    background-color: var(--accent-hover-cyber);
}
.cyberpunk-theme select, .cyberpunk-theme input[type="color"] {
    box-shadow: 0 0 5px var(--border-color-cyber);
}


/* --- Custom Theme Styling --- */
/* Body and Main Container background/text colors are set directly by JS */
.custom-theme #main-container {
    /* Use CSS variables for accents that are derived in JS */
    border: 1px solid var(--custom-accent-color, var(--border-color-dark)); /* Fallback to dark theme border */
}

.custom-theme h2 {
    color: var(--custom-accent-color, var(--text-color-dark));
}

.custom-theme #player-controls button {
    background-color: var(--custom-button-bg, var(--accent-color-dark)); /* Fallback to dark theme accent */
    color: var(--custom-button-text, var(--bg-color-dark)); /* Fallback to dark theme bg for text */
}
.custom-theme #player-controls button:hover {
    /* Simple hover: slightly darken the custom button background */
    filter: brightness(85%);
}

.custom-theme #volume-slider::-webkit-slider-thumb {
    background: var(--custom-accent-color, var(--accent-color-dark));
}
.custom-theme #volume-slider::-moz-range-thumb {
    background: var(--custom-accent-color, var(--accent-color-dark));
}

.custom-theme #playlist li.now-playing {
    color: var(--custom-accent-color, var(--accent-color-dark));
    /* Background for now-playing can be a lightened version of body bg or a fixed light/dark shade */
    background-color: rgba(128, 128, 128, 0.1); /* Default subtle background */
}
.custom-theme #playlist li:hover {
    background-color: rgba(128, 128, 128, 0.05);
}


/* Styling for Color Pickers based on custom theme activation */
#customization-section input[type="color"] {
    opacity: 0.6;
    pointer-events: none; /* Disable interaction when not in custom theme */
    transition: opacity var(--transition-speed);
    border: 2px solid transparent; /* For focus indication */
}

#customization-section.custom-active input[type="color"] {
    opacity: 1;
    pointer-events: auto; /* Enable interaction for custom theme */
    border: 2px solid var(--custom-accent-color, var(--accent-color-dark)); /* Highlight active pickers */
}
#customization-section.custom-active input[type="color"]:hover,
#customization-section.custom-active input[type="color"]:focus {
    box-shadow: 0 0 8px var(--custom-accent-color, var(--accent-color-dark));
}


/* Responsive Design */
@media (max-width: 768px) { /* Tablets and below */
    #main-container {
        margin: 10px;
        padding: 15px;
    }
    #player-controls {
        flex-direction: column; /* Stack controls vertically */
        gap: 15px;
    }
    #player-controls button {
        width: 100%; /* Full width buttons */
    }
    #volume-slider {
        width: 100%; /* Full width slider */
    }
    #playlist {
        max-height: 200px; /* Reduce height on smaller screens */
    }
    h2 {
        font-size: 1.3em;
    }
}

@media (max-width: 480px) { /* Mobile phones */
    body {
        padding: 0; /* Remove body padding for mobile if any was added */
    }
    #main-container {
        margin: 0;
        border-radius: 0; /* Full screen on mobile */
        min-height: 100vh; /* Ensure it takes full viewport height */
        padding: 10px;
    }

    #player-controls {
        padding: 10px;
    }
    #player-controls button {
        font-size: 14px;
        padding: 10px 15px;
    }
    #visualizer {
        height: 80px;
    }
    label {
        font-size: 13px;
    }
    input[type="file"],
    select,
    input[type="color"],
    input[type="file"]::file-selector-button {
        font-size: 14px;
        padding: 8px;
    }
    input[type="file"]::file-selector-button {
        padding: 8px 12px;
    }
    .column-layout-on-mobile { /* Example class for sections you want to stack */
        display: flex;
        flex-direction: column;
    }
}

/* Scrollbar styling (Optional, for a more themed look) */
::-webkit-scrollbar {
    width: 8px;
}
::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.1);
    border-radius: var(--border-radius-sharp);
}
::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: var(--border-radius-sharp);
}
.dark-theme ::-webkit-scrollbar-thumb,
.cyberpunk-theme ::-webkit-scrollbar-thumb {
    background: #555;
}
.dark-theme ::-webkit-scrollbar-thumb:hover,
.cyberpunk-theme ::-webkit-scrollbar-thumb:hover {
    background: #777;
}
.light-theme ::-webkit-scrollbar-thumb:hover {
    background: #aaa;
}

/* Add some focus styles for accessibility */
button:focus, input:focus, select:focus {
    outline: 2px solid var(--accent-color-light); /* Default focus color */
    outline-offset: 2px;
}
.dark-theme button:focus, .dark-theme input:focus, .dark-theme select:focus {
    outline-color: var(--accent-color-dark);
}
.cyberpunk-theme button:focus, .cyberpunk-theme input:focus, .cyberpunk-theme select:focus {
    outline-color: var(--secondary-accent-cyber);
}
.custom-theme button:focus, .custom-theme input:focus, .custom-theme select:focus {
    outline-color: var(--custom-accent-color, var(--accent-color-dark));
}

/* Ensure that the file input button text is not cut off */
input[type="file"] {
    text-overflow: ellipsis; /* May not work perfectly for all browsers but good to have */
}
